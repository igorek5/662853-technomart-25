var messageButton=document.querySelector(".contacts .button"),popupMessage=document.querySelector(".modal-message"),closeMessage=document.querySelector(".modal-message .modal-close"),userName=popupMessage.querySelector("[name=user]"),userEmail=popupMessage.querySelector("[name=email]"),form=popupMessage.querySelector(".message-form"),overlay=document.querySelector(".overlay"),isStorageSupport=!0,storage="",mapLink=document.querySelector(".contacts-map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close"),bayButton=document.querySelectorAll(".buy-button"),addToBasket=document.querySelector(".modal-add-to-basket"),modalButton=addToBasket.querySelector(".modal-button"),backButton=addToBasket.querySelector(".back-button"),addToBasketClose=addToBasket.querySelector(".modal-close"),deliveryButton=document.querySelector(".delivery-button"),guaranteeButton=document.querySelector(".guarantee-button"),creditButton=document.querySelector(".credit-button"),sliderDelivery=document.querySelector(".service-delivery"),sliderGuarantee=document.querySelector(".service-guarantee"),sliderCredit=document.querySelector(".service-credit"),serviceButton=document.querySelectorAll(".service-button"),serviceSliderItem=document.querySelectorAll(".service-slider-item"),controlsButtonBack=document.querySelector(".controls-button-back"),controlsButtonNext=document.querySelector(".controls-button-next"),sliderItems=document.querySelectorAll(".slider-item"),sliderIndicators=document.querySelectorAll(".slider-indicator-item"),b=0;try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}messageButton.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.add("modal-show"),overlay.classList.add("active"),userName.focus(),storage?(userName.value=storage,userEmail.focus()):userName.focus()}),closeMessage.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.remove("modal-show"),popupMessage.classList.remove("modal-error"),overlay.classList.remove("active")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value?isStorageSupport&&localStorage.setItem("userName",userName.value):(e.preventDefault(),popupMessage.classList.remove("modal-error"),popupMessage.offsetWidth=popupMessage.offsetWidth,popupMessage.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMessage.classList.contains("modal-show")&&(e.preventDefault(),popupMessage.classList.remove("modal-show"),popupMessage.classList.remove("modal-error"),overlay.classList.remove("active"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-active"),mapClose.focus()}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-active")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("modal-active")&&(e.preventDefault(),mapPopup.classList.remove("modal-active"))});for(var i=0;i<bayButton.length;i++)bayButton[i].addEventListener("click",function(e){e.preventDefault(),addToBasket.classList.add("modal-active"),modalButton.focus()});addToBasketClose.addEventListener("click",function(e){e.preventDefault(),addToBasket.classList.remove("modal-active")}),backButton.addEventListener("click",function(e){e.preventDefault(),addToBasket.classList.remove("modal-active")}),window.addEventListener("keydown",function(e){27===e.keyCode&&addToBasket.classList.contains("modal-active")&&(e.preventDefault(),addToBasket.classList.remove("modal-active"))}),deliveryButton.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<serviceButton.length;t++)serviceButton[t].classList.remove("active"),serviceSliderItem[t].classList.remove("active");sliderDelivery.classList.add("active"),deliveryButton.classList.add("active")}),guaranteeButton.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<serviceButton.length;t++)serviceButton[t].classList.remove("active"),serviceSliderItem[t].classList.remove("active");sliderGuarantee.classList.add("active"),guaranteeButton.classList.add("active")}),creditButton.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<serviceButton.length;t++)serviceButton[t].classList.remove("active"),serviceSliderItem[t].classList.remove("active");sliderCredit.classList.add("active"),creditButton.classList.add("active")}),controlsButtonBack.addEventListener("click",function(e){e.preventDefault(),sliderItems[b].classList.remove("active"),sliderIndicators[b].classList.remove("active"),(b-=1)<0&&(b=sliderItems.length-1),sliderItems[b].classList.add("active"),sliderIndicators[b].classList.add("active")}),controlsButtonNext.addEventListener("click",function(e){e.preventDefault(),sliderItems[b].classList.remove("active"),sliderIndicators[b].classList.remove("active"),(b+=1)>=sliderItems.length&&(b=0),sliderItems[b].classList.add("active"),sliderIndicators[b].classList.add("active")});